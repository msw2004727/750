<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動小說遊戲 - 動態專案計畫書</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6;
        }
        .dark body {
            background-color: #111827;
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-weight: 600;
        }
        .tab-btn.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        .dark .tab-btn.active {
            color: #60a5fa;
            border-bottom-color: #60a5fa;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .task-list-item {
            display: flex;
            align-items: center;
            padding: 0.5rem 0;
            transition: color 0.3s;
        }
        .task-list-item input[type="checkbox"] {
            margin-right: 0.75rem;
            width: 1.25rem;
            height: 1.25rem;
            accent-color: #3b82f6;
        }
        .task-list-item.completed > label {
            text-decoration: line-through;
            color: #6b7280;
        }
        .dark .task-list-item.completed > label {
            color: #9ca3af;
        }
    </style>
</head>
<body class="dark:bg-gray-900 dark:text-gray-100">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 dark:text-white">互動小說遊戲專案</h1>
            <p class="text-lg text-gray-600 dark:text-gray-400 mt-2">一份持續更新的動態開發藍圖</p>
        </header>

        <!-- 頁籤導覽 -->
        <nav class="flex justify-center border-b border-gray-200 dark:border-gray-700 mb-8">
            <button class="tab-btn active" data-tab="progress">已完成進度</button>
            <button class="tab-btn" data-tab="future">未來開發目標</button>
            <button class="tab-btn" data-tab="tools">使用工具與服務</button>
        </nav>

        <!-- 頁籤內容 -->
        <main>
            <!-- 1. 已完成進度 -->
            <div id="progress" class="tab-content active">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4">專案進度總覽 (已完成)</h2>
                    <ul class="space-y-2">
                        <li class="task-list-item completed">
                            <input type="checkbox" checked disabled><label><strong>[階段一] 專案可行性與架構規劃</strong></label>
                        </li>
                        <li class="task-list-item completed">
                            <input type="checkbox" checked disabled><label><strong>[階段一] 前端介面設計 (UI)</strong></label>
                        </li>
                        <li class="task-list-item completed">
                            <input type="checkbox" checked disabled><label><strong>[階段一] 前端專案模組化</strong></label>
                        </li>
                        <li class="task-list-item completed">
                            <input type="checkbox" checked disabled><label><strong>[階段一] 資料庫結構設計</strong></label>
                        </li>
                         <li class="task-list-item completed">
                            <input type="checkbox" checked disabled><label><strong>[階段一] 後端基礎建設與雲端部署</strong></label>
                        </li>
                        <li class="task-list-item completed">
                            <input type="checkbox" checked disabled><label><strong>[階段二] 前後端串接：</strong>讓前端能從後端 API 獲取資料並渲染。</label>
                        </li>
                        <li class="task-list-item completed">
                            <input type="checkbox" checked disabled><label><strong>[階段二] 核心互動邏輯：</strong>讓前端能將玩家行動傳送至後端。</label>
                        </li>
                        <li class="task-list-item completed">
                            <input type="checkbox" checked disabled><label><strong>[階段三] AI 服務整合：</strong>在後端建立了一個可插拔的 AI 服務，並成功與外部 API 連接。</label>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 2. 使用工具與服務 -->
            <div id="tools" class="tab-content">
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4">技術堆疊與服務列表</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-gray-50 dark:bg-gray-700">
                                <tr>
                                    <th class="p-4">類別</th>
                                    <th class="p-4">工具 / 服務</th>
                                    <th class="p-4">主要用途</th>
                                    <th class="p-4">備註</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold">前端</td>
                                    <td class="p-4">HTML5, CSS3, JavaScript</td>
                                    <td class="p-4">建構遊戲介面的基礎</td>
                                    <td class="p-4">採用 ES Module 進行模組化管理。</td>
                                </tr>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold"></td>
                                    <td class="p-4">Tailwind CSS</td>
                                    <td class="p-4">快速建構 UI 樣式，提供原子化 CSS 框架</td>
                                    <td class="p-4"></td>
                                </tr>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold"></td>
                                    <td class="p-4">SortableJS</td>
                                    <td class="p-4">實現儀表板欄位的拖曳功能</td>
                                    <td class="p-4"></td>
                                </tr>
                                 <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold">後端</td>
                                    <td class="p-4">Python</td>
                                    <td class="p-4">作為後端開發的主要語言</td>
                                    <td class="p-4"></td>
                                </tr>
                                 <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold"></td>
                                    <td class="p-4">FastAPI</td>
                                    <td class="p-4">高效能的非同步 API 框架</td>
                                    <td class="p-4"></td>
                                </tr>
                                 <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold"></td>
                                    <td class="p-4">Uvicorn</td>
                                    <td class="p-4">負責啟動並運行 FastAPI 應用程式的伺服器</td>
                                    <td class="p-4"></td>
                                </tr>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold">資料庫</td>
                                    <td class="p-4">Firebase Firestore</td>
                                    <td class="p-4">儲存所有遊戲資料，提供即時雲端資料庫服務</td>
                                    <td class="p-4"></td>
                                </tr>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold">部署</td>
                                    <td class="p-4">Render</td>
                                    <td class="p-4">託管後端 Python 應用程式的雲端平台</td>
                                    <td class="p-4"></td>
                                </tr>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold"></td>
                                    <td class="p-4">GitHub</td>
                                    <td class="p-4">程式碼版本控制與 CI/CD 觸發</td>
                                    <td class="p-4">Render 會自動從此處拉取最新程式碼部署。</td>
                                </tr>
                                <tr class="border-b dark:border-gray-700">
                                    <td class="p-4 font-bold">核心</td>
                                    <td class="p-4">DeepSeek / OpenAI API</td>
                                    <td class="p-4">動態生成劇情、對話與世界事件</td>
                                    <td class="p-4">已整合，可透過環境變數切換。</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- 3. 未來開發目標 -->
            <div id="future" class="tab-content">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4">第三階段：AI 整合與遊戲迴圈</h2>
                     <ul class="space-y-2">
                        <li class="task-list-item completed">
                            <input type="checkbox" id="task3-1" checked disabled>
                            <label for="task3-1"><strong>AI 服務整合：</strong>在後端建立一個服務，專門用來呼叫大型語言模型的 API (例如 OpenAI GPT 或 Google Gemini)。</label>
                        </li>
                        <li class="task-list-item">
                            <input type="checkbox" id="task3-2">
                            <label for="task3-2"><strong>Prompt 工程：</strong>建立一個 Prompt 生成器，能根據當前遊戲狀態（從資料庫讀取）和玩家行動，組裝成一個結構化的指令給 AI。</label>
                        </li>
                         <li class="task-list-item">
                            <input type="checkbox" id="task3-3">
                            <label for="task3-3"><strong>AI 回應解析：</strong>建立一個解析器，能處理 AI 回傳的 JSON，並根據其中的指令更新資料庫（如：改變好感度、獲得物品、推進時間）。</p>
                        </li>
                        <li class="task-list-item">
                            <input type="checkbox" id="task3-4">
                            <label for="task3-4"><strong>建立遊戲主迴圈 (Game Loop)：</strong>將「接收行動 -> 呼叫 AI -> 解析回應 -> 更新資料庫 -> 回傳新狀態給前端」的完整流程串接起來。</label>
                        </li>
                    </ul>
                </div>
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mt-6">
                    <h2 class="text-2xl font-bold mb-4">第四階段：深度玩法與擴充</h2>
                     <ul class="space-y-2">
                        <li class="task-list-item">
                            <input type="checkbox" id="task4-1">
                            <label for="task4-1"><strong>實作「迷霧系統」：</strong>根據資料庫設計，完成 NPC 背景故事和物品鑑定的抽絲剝繭邏輯。</label>
                        </li>
                         <li class="task-list-item">
                            <input type="checkbox" id="task4-2">
                            <label for="task4-2"><strong>動態世界事件：</strong>設計一個系統，讓 AI 可以主動觸發或創造新的 NPC、任務、甚至地點，並由後端將其永久寫入資料庫。</label>
                        </li>
                        <li class="task-list-item">
                            <input type="checkbox" id="task4-3">
                            <label for="task4-3"><strong>擴充後端資料：</strong>讓後端 API 能回傳玩家的裝備、人脈、記憶等詳細資料，以取代前端的假資料。</label>
                        </li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tab-btn');
            const contents = document.querySelectorAll('.tab-content');
            const defaultTab = 'progress'; // 預設顯示 '已完成進度'

            // 初始化頁籤狀態
            tabs.forEach(tab => {
                const isDefault = tab.dataset.tab === defaultTab;
                tab.classList.toggle('active', isDefault);
            });
            contents.forEach(content => {
                const isDefault = content.id === defaultTab;
                content.classList.toggle('active', isDefault);
            });

            // 頁籤點擊事件
            tabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    tabs.forEach(item => item.classList.remove('active'));
                    contents.forEach(item => item.classList.remove('active'));

                    this.classList.add('active');
                    document.getElementById(this.dataset.tab).classList.add('active');
                });
            });

            // 核取方塊點擊事件
            const taskItems = document.querySelectorAll('.task-list-item');
            taskItems.forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                
                function applyStyle(cb) {
                     item.classList.toggle('completed', cb.checked);
                }

                if (checkbox) {
                    // 初始化樣式
                    applyStyle(checkbox);
                    
                    if (!checkbox.disabled) {
                         checkbox.addEventListener('change', function() {
                            applyStyle(this);
                        });
                    }
                }
            });
        });
    </script>
</body>
</html>
