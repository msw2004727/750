<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動小說遊戲 - 動態專案計畫書</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6;
        }
        .dark body {
            background-color: #111827;
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-weight: 600;
        }
        .tab-btn.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        .dark .tab-btn.active {
            color: #60a5fa;
            border-bottom-color: #60a5fa;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .task-list-item {
            display: flex;
            align-items: center;
            padding: 0.5rem 0;
            transition: color 0.3s;
        }
        .task-list-item input[type="checkbox"] {
            margin-right: 0.75rem;
            width: 1.25rem;
            height: 1.25rem;
            accent-color: #3b82f6;
        }
        .task-list-item.completed > label {
            text-decoration: line-through;
            color: #6b7280;
        }
        .dark .task-list-item.completed > label {
            color: #9ca3af;
        }
        .prose h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.25rem;
        }
        .dark .prose h3 {
            border-bottom-color: #4b5563;
        }
        .prose p, .prose li, .prose ul, .prose blockquote {
            color: #374151;
        }
        .dark .prose p, .dark .prose li, .dark .prose ul, .dark .prose blockquote {
            color: #d1d5db;
        }
        .prose blockquote {
            border-left: 4px solid #d1d5db;
            padding-left: 1rem;
            font-style: italic;
        }
        .dark .prose blockquote {
             border-left-color: #4b5563;
        }
    </style>
</head>
<body class="dark:bg-gray-900 dark:text-gray-100">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 dark:text-white">互動小說遊戲專案</h1>
            <p class="text-lg text-gray-600 dark:text-gray-400 mt-2">一份持續更新的動態開發藍圖</p>
        </header>

        <nav class="flex flex-wrap justify-center border-b border-gray-200 dark:border-gray-700 mb-8">
            <button class="tab-btn active" data-tab="polishing">短期打磨目標</button>
            <button class="tab-btn" data-tab="milestones">核心功能里程碑</button>
            <button class="tab-btn" data-tab="future">未來開發目標</button>
            <button class="tab-btn" data-tab="concept">遊戲企劃</button>
            <button class="tab-btn" data-tab="qa">遊戲Q&A</button>
        </nav>

        <main>
            <div id="concept" class="tab-content">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md prose max-w-none">
                    <h2 class="text-2xl font-bold mb-4">遊戲企劃與核心玩法</h2>
                    <h3>核心理念：一個由你和AI共同創造的動態江湖</h3>
                    <p>這款遊戲的核心是一個單機的、高自由度的互動文字世界。玩家扮演一位穿越到古代（約宋朝時期）的主角，從一個默默無聞的村民開始，逐步探索並影響整個世界。與傳統遊戲不同，這個世界的NPC、物品、場景乃至於劇情發展，都由大型語言模型（AI）動態生成，並永久記錄在資料庫中。每一個玩家的選擇，都在為這個世界添磚加瓦，使其成為一個真正獨一無二、不斷演化的江湖。</p>
                    <h3>遊戲玩法與特色機制</h3>
                    <ul>
                        <li><strong>動態世界系統：</strong> 遊戲世界擁有獨立的時間流動（年月日、時辰）、天氣變化與溫度。這些因素將直接影響劇情描述、NPC的行為以及特定事件的觸發，營造出一個生動真實的環境。</li>
                        <li><strong>玩家即主角：</strong> 遊戲不預設主角的性格。玩家的選擇、對話風格和行為模式將直接塑造主角的個性和名聲。外貌等特徵也會隨著遊戲時間、經歷和裝備而產生細微變化。</li>
                        <li><strong>深度NPC系統：</strong> 每個NPC都擁有獨立的個性、背景故事、人際關係和記憶，玩家的行動可以真實地改變其命運。</li>
                        <li><strong>資訊迷霧與探索（抽絲剝繭系統）：</strong> NPC的背景、物品的用途等資訊需要玩家透過互動逐步發掘，每一次的發現都充滿成就感。</li>
                        <li><strong>永久性世界演化：</strong> 任何一位玩家創造出的新NPC、新地點等元素，將被永久記錄在核心資料庫中，供後續所有玩家探索。</li>
                    </ul>
                     <h3>開發願景與藍圖</h3>
                     <p>為了確保專案能夠穩健地推進，我們將開發過程分為三個階段性的願景：</p>
                     <h4>短期願景 (MVP - 最小可行性產品)</h4>
                     <p><strong>目標：</strong> 建立一個穩定、可玩的核心體驗，讓玩家能在一個小範圍內（黑石村）完整地體驗到遊戲的獨特魅力。</p>
                     <h4>中期願景 (擴展世界與玩法深度)</h4>
                     <p><strong>目標：</strong> 打破單一場景的限制，擴展遊戲世界，並引入更多元的系統，讓遊戲的可玩性和重玩價值大幅提升。</p>
                     <h4>長期願景 (一個活著的、由玩家共創的世界)</h4>
                     <p><strong>目標：</strong> 實現最初的夢想——一個能夠自我演化、並由所有玩家的行動共同塑造其歷史的永久性世界。</p>
                </div>
            </div>

            <div id="polishing" class="tab-content active">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md prose max-w-none">
                    <h2 class="text-2xl font-bold mb-4">短期打磨目標：AI 調教與寫實化</h2>
                    <p><strong>核心理念：</strong> 此階段的目標不是開發新功能，而是針對現有系統進行深度調教。我們將修改 Prompt，讓 AI 的敘事和判斷更加符合現實邏輯，並與遊戲機制緊密結合，創造一個更具沉浸感和可信度的世界。</p>
                    
                    <ul class="list-none p-0">
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>時間與顯示：</strong>將時間改為宋朝風格的時辰顯示。</label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>世界觀設定：</strong>將遊戲背景從「部落」全面修改為「村落」。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task-polish-1"><label><strong>時間與環境系統：</strong>指導 AI 根據 `currentTime` (白天/夜晚) 和 `currentWeather` (晴/雨) 來影響其故事描述、氛圍和事件。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task-polish-2"><label><strong>健康與耐力系統：</strong>指導 AI 根據玩家的 `health` 和 `hunger` 狀態調整敘事，並限制某些高強度行動。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task-polish-3"><label><strong>人際關係與情感模型：</strong>指導 AI 參考玩家與 NPC 的 `affinity` (好感度) 來生成更真實的互動。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task-polish-4"><label><strong>移動與探索邏輯：</strong>指導 AI 根據地點特性（如森林、村莊）和玩家狀態，生成更合理的移動選項和時間消耗。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task-polish-5"><label><strong>物品互動與鑑定：</strong>指導 AI 根據物品的模糊描述來敘事，並設計出能觸發「鑑定」的事件。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task-polish-6"><label><strong>技能與屬性檢定 (軟性)：</strong>指導 AI 根據玩家的行為傾向（隱性標籤）來判斷行動成功率。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task-polish-7"><label><strong>運氣與隨機事件：</strong>在 Prompt 中加入 `luck` 參數，讓 AI 決定隨機事件是正面還是負面。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task-polish-8"><label><strong>世界觀與知識體系：</strong>在 Prompt 中注入更多關於宋朝背景的核心設定，讓 AI 的創造更貼合世界觀。</label></li>
                    </ul>
                </div>
            </div>

            <div id="milestones" class="tab-content">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4">核心功能里程碑 (已完成)</h2>
                    <ul class="space-y-2">
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段一] 專案基礎建設</strong> (前端/後端/資料庫架構)</label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段二] 核心遊戲迴圈</strong> (前後端串接與AI互動)</label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段三] 玩家狀態與世界互動</strong> (背包/人脈系統建立)</label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段四] 深度玩法與擴充</strong> (迷霧系統/動態世界事件)</label></li>
                    </ul>
                </div>
            </div>

            <div id="future" class="tab-content">
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md prose max-w-none">
                    <h2 class="text-2xl font-bold mb-4">未來開發目標 (暫緩)</h2>
                    <p>這些是需要修改程式碼、新增功能模組的較大型開發任務。可以在完成短期打磨目標後，根據優先級進行選擇。</p>
                    <h3>A. 效能優化</h3>
                    <blockquote>
                        <strong>資料庫讀取效能 (Denormalization):</strong> 在玩家獲得物品或建立關係時，將物品/NPC 的核心資訊（如名稱、描述）作為副本存入玩家的子集合中，避免每次都需要跨集合查詢，以提升 API 回應速度。
                    </blockquote>

                    <h3>B. 功能擴充</h3>
                    <blockquote>
                        <strong>任務/日誌系統:</strong> 讓玩家可以追蹤當前的主要任務和支線任務。需要建立新的 `quests` 集合，並讓 AI 能觸發任務的開始、推進和完成。
                    </blockquote>
                    <blockquote>
                        <strong>硬性技能與成長系統:</strong> 引入明確的技能樹或屬性點系統，讓玩家有更清晰的成長路徑。AI 在判斷行動結果時需參考這些數值。
                    </blockquote>
                </div>
            </div>

            <div id="qa" class="tab-content">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md prose max-w-none">
                    <h2 class="text-2xl font-bold mb-4">遊戲設計 Q&A</h2>
                    <h3>Q1：這款遊戲有「結局」嗎？可以「通關」嗎？</h3>
                    <p>答：我們的長期願景是打造一個沒有固定结局的「開放世界」。遊戲的核心樂趣來自於探索和體驗，而非達成某個單一的最終目標。</p>
                    <h3>Q2：AI 會不會生成一些不合邏輯或破壞平衡的內容？</h3>
                    <p>答：這是 AI 生成內容遊戲面臨的最大挑戰。我們主要透過「強大的 Prompt 指令」、「結構化輸出 (JSON)」和「後端邏輯驗證」這三道防線來確保遊戲體驗的穩定。</p>
                    <h3>Q3：如果我把遊戲「玩壞了」（例如殺光了所有重要NPC），會怎麼樣？</h3>
                    <p>答：這正是遊戲的樂趣所在！如果您殺光了所有重要NPC，AI 會根據這個新情境，生成後續的劇情，例如：倖存者們為了爭奪權力而內鬥、新的勢力會趁虛而入、或者整個村莊因為失去秩序而分崩離析。</p>
                    <h3>Q4：遊戲是單機的，那「永久性世界演化」是如何影響其他玩家的？</h3>
                     <p>答：我們的核心資料庫（如 `npcs`, `items`, `locations` 集合）是所有玩家共享的。而每個玩家的個人進度（如 `inventory`, `relationships`）是獨立的。例如，玩家A 創造出了一個新的 NPC「獨臂刀客」，這個 NPC 的資料會被永久寫入到共享的 `/npcs` 集合中。當玩家B 之後進入遊戲，在他的世界裡，這個「獨臂刀客」是存在的，但他需要自己去接觸和了解這位傳奇人物。</p>
                </div>
            </div>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tab-btn');
            const contents = document.querySelectorAll('.tab-content');
            const defaultTab = 'polishing'; // 預設顯示 '短期打磨目標'

            function showTab(tabId) {
                tabs.forEach(tab => tab.classList.toggle('active', tab.dataset.tab === tabId));
                contents.forEach(content => content.classList.toggle('active', content.id === tabId));
            }
            
            showTab(defaultTab);

            tabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    showTab(this.dataset.tab);
                });
            });

            const taskItems = document.querySelectorAll('.task-list-item input[type="checkbox"]');
            taskItems.forEach(checkbox => {
                const item = checkbox.closest('.task-list-item');
                function applyStyle() {
                    if (item) item.classList.toggle('completed', checkbox.checked);
                }
                applyStyle();
                if (!checkbox.disabled) {
                    checkbox.addEventListener('change', applyStyle);
                }
            });
        });
    </script>
</body>
</html>
