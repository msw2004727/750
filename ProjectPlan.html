<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 驅動的文字冒險遊戲 - 專案計畫</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
            padding: 20px 0;
        }
        header {
            background: #333;
            color: #fff;
            padding: 1rem 0;
            text-align: center;
        }
        header h1 {
            margin: 0;
        }
        .tabs {
            display: flex;
            background: #444;
            border-bottom: 2px solid #00aaff;
        }
        .tab-link {
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
            color: white;
            background-color: inherit;
        }
        .tab-link:hover {
            background-color: #555;
        }
        .tab-link.active {
            background-color: #00aaff;
        }
        .tab-content {
            display: none;
            padding: 20px;
            background-color: white;
            border-top: none;
            animation: fadeEffect 0.5s;
        }
        @keyframes fadeEffect {
            from {opacity: 0;}
            to {opacity: 1;}
        }
        h2 {
            color: #00aaff;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }
        .task-list {
            list-style: none;
            padding: 0;
        }
        .task-list li {
            background: #fff;
            margin-bottom: 10px;
            padding: 15px;
            border-left: 5px solid #00aaff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .task-name {
            font-weight: bold;
        }
        .status {
            padding: 5px 15px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
        }
        .status-completed { background-color: #28a745; }
        .status-inprogress { background-color: #ffc107; color: #333; }
        .status-planned { background-color: #17a2b8; }
        .status-on-hold { background-color: #6c757d; }

        .notes {
            background-color: #e9f7ff;
            border-left: 4px solid #00aaff;
            padding: 15px;
            margin-top: 20px;
        }
        .notes h3 {
            margin-top: 0;
            color: #005f88;
        }
    </style>
</head>
<body>

    <header>
        <h1>AI 驅動的文字冒險遊戲 - 專案計畫</h1>
        <p>一個動態、由 AI 敘事的文字 RPG 遊戲</p>
    </header>

    <div class="tabs">
        <button class="tab-link active" onclick="openTab(event, 'milestones')">核心功能里程碑</button>
        <button class="tab-link" onclick="openTab(event, 'polishing')">短期打磨目標</button>
        <button class="tab-link" onclick="openTab(event, 'future')">未來開發目標</button>
    </div>

    <div id="milestones" class="tab-content" style="display: block;">
        <h2>核心功能里程碑</h2>
        
        <h3>第一階段：專案基礎建設</h3>
        <ul class="task-list">
            <li>
                <span class="task-name">Task 1-1: 初始化 Firebase 專案</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 1-2: 建立後端 FastAPI 框架</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 1-3: 設計並填充基礎資料庫結構</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 1-4: 建立前端基本 HTML/CSS/JS 結構</span>
                <span class="status status-completed">已完成</span>
            </li>
        </ul>

        <h3>第二階段：核心遊戲迴圈</h3>
        <ul class="task-list">
            <li>
                <span class="task-name">Task 2-1: 實作後端 AI 敘事生成 API</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 2-2: 實作後端遊戲狀態更新 API</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 2-3: 前端實作發送玩家行動與接收遊戲狀態</span>
                <span class="status status-completed">已完成</span>
            </li>
             <li>
                <span class="task-name">Task 2-4: 前端 UI 動態渲染敘事與選項</span>
                <span class="status status-completed">已完成</span>
            </li>
        </ul>

        <h3>第三階段：玩家狀態與世界互動</h3>
        <ul class="task-list">
            <li>
                <span class="task-name">Task 3-1: 擴充後端 API 以回傳玩家詳細狀態 (背包、人脈)</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 3-2: 前端建立「裝備」、「人脈」彈出視窗</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 3-3: 前端 UI 使用假資料 (Mock Data) 渲染彈出視窗</span>
                 <span class="status status-completed">已完成</span>
            </li>
        </ul>
        
        <h3>第四階段：深度玩法與擴充</h3>
        <ul class="task-list">
            <li>
                <span class="task-name">Task 4-1: (迷霧系統) 後端 API 擴充，根據玩家認知回傳資料</span>
                <span class="status status-completed">已完成</span>
            </li>
             <li>
                <span class="task-name">Task 4-2: (迷霧系統) 前端 UI 渲染真實資料 (移除假資料)</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 4-3: (動態世界事件) 賦予 AI 創造世界的能力 (Prompt 修改)</span>
                <span class="status status-completed">已完成</span>
            </li>
            <li>
                <span class="task-name">Task 4-4: (動態世界事件) 後端實作 AI 世界創造的處理邏輯</span>
                <span class="status status-completed">已完成</span>
            </li>
        </ul>
    </div>

    <div id="polishing" class="tab-content">
        <h2>短期打磨目標：AI 調教與寫實化</h2>
        <div class="notes">
            <h3>核心理念</h3>
            <p>此階段的目標不是開發新功能，而是針對現有系統進行深度調教。我們將修改 Prompt，讓 AI 的敘事和判斷更加符合現實邏輯，並與遊戲機制緊密結合，創造一個更具沉浸感和可信度的世界。</p>
        </div>
        <ul class="task-list">
            <li>
                <span class="task-name">時間與環境系統</span>
                <span class="status status-planned">計畫中</span>
            </li>
             <p>細節：指導 AI 根據 `currentTime` (白天/夜晚/清晨/黃昏) 和 `currentWeather` (晴/雨/雪) 來影響其故事描述、氛圍和事件。例如：夜晚的警覺性應更高，雨天可能引發滑倒或感冒事件。</p>
            <li>
                <span class="task-name">健康與耐力系統</span>
                <span class="status status-planned">計畫中</span>
            </li>
            <p>細節：指導 AI 根據玩家的 `health` 和 `hunger` 狀態調整敘事。低健康值應觸發負面描述（如頭暈、虛弱），並限制某些高強度行動選項（如「全力衝刺」）。</p>
            <li>
                <span class="task-name">人際關係與情感模型</span>
                <span class="status status-planned">計畫中</span>
            </li>
            <p>細節：指導 AI 在生成敘事時，參考玩家與在場 NPC 的 `affinity` (好感度)。高好感度應帶來更友善的對話和選項，低好感度則相反。AI 的判斷應影響好感度的動態變化。</p>
            <li>
                <span class="task-name">移動與探索邏輯</span>
                <span class="status status-planned">計畫中</span>
            </li>
            <p>細節：指導 AI 根據地點的特性（如森林、城市）和玩家狀態，生成更合理的移動選項和時間消耗。例如，在「茂密森林」中移動 1 公里，應比在「平坦大道」上花費更多 `time_amount`。</p>
             <li>
                <span class="task-name">物品互動與鑑定</span>
                <span class="status status-planned">計畫中</span>
            </li>
            <p>細節：指導 AI 根據物品的 `vague_description` 進行敘事，並設計出能夠將 `identified` 狀態變為 `true` 的事件或行動選項（如「尋找專家鑑定」、「使用鑑定卷軸」）。</p>
            <li>
                <span class="task-name">技能與屬性檢定 (軟性)</span>
                <span class="status status-planned">計畫中</span>
            </li>
            <p>細節：雖然我們沒有硬性的技能點數，但可以指導 AI 根據玩家的「隱性標籤」（例如，如果玩家經常選擇「潛行」，就給他一個 `stealthy` 的隱性標籤）來判斷行動成功率，並在敘事中體現出來。</p>
            <li>
                <span class="task-name">運氣與隨機事件</span>
                <span class="status status-planned">計畫中</span>
            </li>
            <p>細節：在 Prompt 中加入一個 `luck` 參數（可設為定值或隨機值），指導 AI 根據此參數的數值高低，來決定隨機事件是偏向正面（撿到錢）還是負面（被石頭絆倒）。</p>
            <li>
                <span class="task-name">世界觀與知識體系</span>
                <span class="status status-planned">計畫中</span>
            </li>
            <p>細節：在 Prompt 的世界情境部分，注入更多關於這個世界的核心設定（如歷史、神話、主要勢力），讓 AI 的創造和敘事能更貼合我們設定的世界觀，而不是天馬行空。</p>
        </ul>
    </div>
    
    <div id="future" class="tab-content">
        <h2>未來開發目標</h2>
        <div class="notes">
            <h3>核心理念</h3>
            <p>這些是需要修改程式碼、新增功能模組的較大型開發任務。可以在完成短期打磨目標後，根據優先級進行選擇。</p>
        </div>

        <h3>A. 效能優化</h3>
        <ul class="task-list">
            <li>
                <span class="task-name">資料庫讀取效能 (Denormalization)</span>
                <span class="status status-on-hold">暫緩</span>
            </li>
            <p>目標：減少 API 的資料庫查詢次數，提升回應速度。<br>方案：在玩家獲得物品或建立關係時，將物品/NPC 的核心資訊（如名稱、描述）作為副本存入玩家的子集合中，避免每次都需要跨集合查詢。</p>
        </ul>

        <h3>B. 功能擴充</h3>
        <ul class="task-list">
            <li>
                <span class="task-name">任務/日誌系統</span>
                <span class="status status-on-hold">暫緩</span>
            </li>
            <p>目標：讓玩家可以追蹤當前的主要任務和支線任務。<br>方案：建立一個新的 `quests` 集合，並在玩家資料中加入 `active_quests` 欄位。AI 可以觸發任務的開始、推進和完成。</p>
            <li>
                <span class="task-name">硬性技能與成長系統</span>
                <span class="status status-on-hold">暫緩</span>
            </li>
            <p>目標：引入明確的技能樹或屬性點系統，讓玩家有更清晰的成長路徑。<br>方案：在玩家資料中新增 `attributes` (如力量、敏捷) 和 `skills` (如劍術、偷竊) 物件。AI 在判斷行動結果時需參考這些數值。</p>
             <li>
                <span class="task-name">多人在線互動</span>
                <span class="status status-on-hold">暫緩</span>
            </li>
            <p>目標：讓多個玩家能在同一個世界中互動。<br>方案：這是最複雜的目標，需要重構遊戲核心邏輯，處理玩家間的同步問題。需要引入 Websocket 或類似的即時通訊技術。</p>
        </ul>
    </div>

    <script>
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tablinks = document.getElementsByClassName("tab-link");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            evt.currentTarget.className += " active";
        }
    </script>

</body>
</html>
