<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>互動小說遊戲 - 動態專案計畫書</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f3f4f6;
        }
        .dark body {
            background-color: #111827;
        }
        .tab-btn {
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-weight: 600;
        }
        .tab-btn.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }
        .dark .tab-btn.active {
            color: #60a5fa;
            border-bottom-color: #60a5fa;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .task-list-item {
            display: flex;
            align-items: center;
            padding: 0.5rem 0;
            transition: color 0.3s;
        }
        .task-list-item input[type="checkbox"] {
            margin-right: 0.75rem;
            width: 1.25rem;
            height: 1.25rem;
            accent-color: #3b82f6;
        }
        .task-list-item.completed > label {
            text-decoration: line-through;
            color: #6b7280;
        }
        .dark .task-list-item.completed > label {
            color: #9ca3af;
        }
        .prose h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
            padding-bottom: 0.25rem;
        }
        .dark .prose h3 {
            border-bottom-color: #4b5563;
        }
        .prose p, .prose li {
            color: #374151;
        }
        .dark .prose p, .dark .prose li {
            color: #d1d5db;
        }

    </style>
</head>
<body class="dark:bg-gray-900 dark:text-gray-100">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 dark:text-white">互動小說遊戲專案</h1>
            <p class="text-lg text-gray-600 dark:text-gray-400 mt-2">一份持續更新的動態開發藍圖</p>
        </header>

        <!-- 頁籤導覽 -->
        <nav class="flex flex-wrap justify-center border-b border-gray-200 dark:border-gray-700 mb-8">
            <button class="tab-btn active" data-tab="concept">遊戲企劃</button>
            <button class="tab-btn" data-tab="progress">已完成進度</button>
            <button class="tab-btn" data-tab="future">未來開發目標</button>
            <button class="tab-btn" data-tab="tools">使用工具與服務</button>
        </nav>

        <!-- 頁籤內容 -->
        <main>
            <!-- 1. 遊戲企劃 -->
            <div id="concept" class="tab-content active">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md prose max-w-none">
                    <h2 class="text-2xl font-bold mb-4">遊戲企劃與核心玩法</h2>
                    
                    <h3>核心理念：一個由你和AI共同創造的動態江湖</h3>
                    <p>
                        這款遊戲的核心是一個單機的、高自由度的互動文字世界。玩家扮演一位穿越到古代的主角，從一個默默無聞的市井小民開始，逐步探索並影響整個世界。與傳統遊戲不同，這個世界的NPC、物品、場景乃至於劇情發展，都由大型語言模型（AI）動態生成，並永久記錄在資料庫中。每一個玩家的選擇，都在為這個世界添磚加瓦，使其成為一個真正獨一無二、不斷演化的江湖。
                    </p>

                    <h3>遊戲玩法與特色機制</h3>
                    <ul>
                        <li>
                            <strong>動態世界系統：</strong> 遊戲世界擁有獨立的時間流動（年月日、時辰）、天氣變化與溫度。這些因素將直接影響劇情描述、NPC的行為以及特定事件的觸發，營造出一個生動真實的環境。
                        </li>
                        <li>
                            <strong>玩家即主角：</strong> 遊戲不預設主角的性格。玩家的選擇、對話風格和行為模式將直接塑造主角的個性和名聲。外貌等特徵也會隨著遊戲時間、經歷和裝備而產生細微變化。
                        </li>
                        <li>
                            <strong>深度NPC系統：</strong> 每個NPC（即使是AI隨機生成的）都擁有獨立的個性、背景故事、人際關係和記憶。他們會記得與玩家的互動，好感度的變化會直接影響他們的行為和對話。玩家的行動可以真實地改變NPC的命運，例如，若鎮長被殺，其他NPC會根據他們的野心和能力去角逐這個位置，甚至玩家自己也可以取而代之。
                        </li>
                        <li>
                            <strong>資訊迷霧與探索（抽絲剝繭系統）：</strong> 遊戲的核心樂趣之一在於探索與發現。玩家初始接觸到的人事物都是充滿「迷霧」的。一個NPC的背景故事、一件物品的真正用途，都需要玩家透過對話、送禮、完成任務、或是從其他線索（如書籍、傳聞）中逐步發掘。這種設計旨在鼓勵玩家深入與世界互動，每一次的發現都充滿成就感。
                        </li>
                         <li>
                            <strong>永久性世界演化：</strong> 這是本遊戲最具野心的目標。當任何一位玩家在遊戲中觸發了重大事件，導致一個**全新的NPC、物品、地點或設施被創造出來時，這些新元素將被永久地記錄在核心資料庫中**。這意味著，後來的其他玩家在遊戲中，也能遇到這個由前人行動所創造出來的新元素，但他們同樣需要經過自己的探索流程去了解其全貌。最終，遊戲世界將成為所有玩家共同創造的結晶。
                        </li>
                    </ul>

                     <h3>核心遊戲循環 (Core Loop)</h3>
                     <p>
                        玩家的遊戲體驗將圍繞著一個不斷循環的過程：
                        <br>
                        <strong>探索 (Explore)</strong> → <strong>互動 (Interact)</strong> → <strong>選擇 (Choose)</strong> → <strong>影響 (Impact)</strong> → <strong>反饋 (Feedback)</strong>
                     </p>
                </div>
            </div>

            <!-- 2. 已完成進度 -->
            <div id="progress" class="tab-content">
                <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4">專案進度總覽 (已完成)</h2>
                    <ul class="space-y-2">
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段一] 專案可行性與架構規劃</strong></label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段一] 前端介面設計 (UI)</strong></label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段一] 前端專案模組化</strong></label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段一] 資料庫結構設計</strong></label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段一] 後端基礎建設與雲端部署</strong></label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段二] 前後端串接</strong></label></li>
                        <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段二] 核心互動邏輯</strong></label></li>
                         <li class="task-list-item completed"><input type="checkbox" checked disabled><label><strong>[階段三] AI 服務整合</strong></label></li>
                    </ul>
                </div>
            </div>

            <!-- 3. 未來開發目標 -->
            <div id="future" class="tab-content">
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4">第三階段：AI 整合與遊戲迴圈</h2>
                     <ul class="space-y-2">
                        <li class="task-list-item completed"><input type="checkbox" id="task3-1" checked disabled><label><strong>AI 服務整合：</strong>在後端建立了一個可插拔的 AI 服務，並成功與外部 API 連接。</label></li>
                        <li class="task-list-item completed"><input type="checkbox" id="task3-2" checked disabled><label><strong>Prompt 工程：</strong>建立一個 Prompt 生成器，能根據當前遊戲狀態和玩家行動，組裝成一個結構化的指令給 AI。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task3-3"><label><strong>AI 回應解析：</strong>建立一個解析器，能處理 AI 回傳的 JSON，並根據其中的指令更新資料庫（如：改變好感度、獲得物品、推進時間）。</p></label></li>
                        <li class="task-list-item"><input type="checkbox" id="task3-4"><label><strong>建立遊戲主迴圈 (Game Loop)：</strong>將「接收行動 -> 呼叫 AI -> 解析回應 -> 更新資料庫 -> 回傳新狀態給前端」的完整流程串接起來。</label></li>
                    </ul>
                </div>
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md mt-6">
                    <h2 class="text-2xl font-bold mb-4">第四階段：深度玩法與擴充</h2>
                     <ul class="space-y-2">
                        <li class="task-list-item"><input type="checkbox" id="task4-1"><label><strong>實作「迷霧系統」：</strong>根據資料庫設計，完成 NPC 背景故事和物品鑑定的抽絲剝繭邏輯。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task4-2"><label><strong>動態世界事件：</strong>設計一個系統，讓 AI 可以主動觸發或創造新的 NPC、任務、甚至地點，並由後端將其永久寫入資料庫。</label></li>
                        <li class="task-list-item"><input type="checkbox" id="task4-3"><label><strong>擴充後端資料：</strong>讓後端 API 能回傳玩家的裝備、人脈、記憶等詳細資料，以取代前端的假資料。</label></li>
                    </ul>
                </div>
            </div>

            <!-- 4. 使用工具與服務 -->
            <div id="tools" class="tab-content">
                 <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                    <h2 class="text-2xl font-bold mb-4">技術堆疊與服務列表</h2>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left">
                            <thead class="bg-gray-50 dark:bg-gray-700"><tr><th class="p-4">類別</th><th class="p-4">工具 / 服務</th><th class="p-4">主要用途</th><th class="p-4">備註</th></tr></thead>
                            <tbody>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold">前端</td><td class="p-4">HTML5, CSS3, JavaScript</td><td class="p-4">建構遊戲介面的基礎</td><td class="p-4">採用 ES Module 進行模組化管理。</td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold"></td><td class="p-4">Tailwind CSS</td><td class="p-4">快速建構 UI 樣式</td><td class="p-4"></td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold"></td><td class="p-4">SortableJS</td><td class="p-4">實現儀表板欄位的拖曳功能</td><td class="p-4"></td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold">後端</td><td class="p-4">Python</td><td class="p-4">作為後端開發的主要語言</td><td class="p-4"></td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold"></td><td class="p-4">FastAPI</td><td class="p-4">高效能的非同步 API 框架</td><td class="p-4"></td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold"></td><td class="p-4">Uvicorn</td><td class="p-4">負責啟動並運行 FastAPI 應用程式</td><td class="p-4"></td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold">資料庫</td><td class="p-4">Firebase Firestore</td><td class="p-4">儲存所有遊戲資料</td><td class="p-4"></td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold">部署</td><td class="p-4">Render</td><td class="p-4">託管後端 Python 應用程式</td><td class="p-4"></td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold"></td><td class="p-4">GitHub</td><td class="p-4">程式碼版本控制與 CI/CD 觸發</td><td class="p-4"></td></tr>
                                <tr class="border-b dark:border-gray-700"><td class="p-4 font-bold">核心</td><td class="p-4">DeepSeek / OpenAI API</td><td class="p-4">動態生成劇情、對話與世界事件</td><td class="p-4">已整合，可透過環境變數切換。</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabs = document.querySelectorAll('.tab-btn');
            const contents = document.querySelectorAll('.tab-content');
            const defaultTab = 'concept'; // 預設顯示 '遊戲企劃'

            // 初始化頁籤狀態
            tabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.tab === defaultTab);
            });
            contents.forEach(content => {
                content.classList.toggle('active', content.id === defaultTab);
            });

            // 頁籤點擊事件
            tabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    tabs.forEach(item => item.classList.remove('active'));
                    contents.forEach(item => item.classList.remove('active'));

                    this.classList.add('active');
                    document.getElementById(this.dataset.tab).classList.add('active');
                });
            });

            // 核取方塊點擊事件
            const taskItems = document.querySelectorAll('.task-list-item');
            taskItems.forEach(item => {
                const checkbox = item.querySelector('input[type="checkbox"]');
                function applyStyle(cb) {
                     item.classList.toggle('completed', cb.checked);
                }
                if (checkbox) {
                    applyStyle(checkbox);
                    if (!checkbox.disabled) {
                         checkbox.addEventListener('change', function() { applyStyle(this); });
                    }
                }
            });
        });
    </script>
</body>
</html>
